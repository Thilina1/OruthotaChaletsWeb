"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{5758:(e,r,t)=>{t.d(r,{E_:()=>o,Pn:()=>n,m_:()=>s});var i=t(3004);function n(e){(0,i.zK)(e)}function o(e,r,t){(0,i.eJ)(e,r,t)}function s(e,r,t){(0,i.x9)(e,r,t)}},7962:(e,r,t)=>{t.r(r),t.d(r,{FirebaseClientProvider:()=>E,FirebaseContext:()=>p,FirebaseProvider:()=>f,FirestorePermissionError:()=>S,addDocumentNonBlocking:()=>F,deleteDocumentNonBlocking:()=>U,errorEmitter:()=>c,getSdks:()=>_,initializeFirebase:()=>I,initiateAnonymousSignIn:()=>x.Pn,initiateEmailSignIn:()=>x.m_,initiateEmailSignUp:()=>x.E_,setDocumentNonBlocking:()=>D,updateDocumentNonBlocking:()=>A,useAuth:()=>m,useCollection:()=>w,useDoc:()=>k,useFirebase:()=>h,useFirebaseApp:()=>v,useFirestore:()=>b,useUser:()=>g});let i={apiKey:"AIzaSyDOqaqhI9l7xYCtwFbeSAUofNDBkDz1kGo",authDomain:"studio-317577973-f696c.firebaseapp.com",projectId:"studio-317577973-f696c",storageBucket:"studio-317577973-f696c.appspot.com",messagingSenderId:"909219664895",appId:"1:909219664895:web:f4d8b035ead3ac1e21cdca"};var n=t(3915),o=t(3004),s=t(5317),u=t(858),a=t(5155),l=t(2115);let c=function(){let e={};return{on(r,t){var i;e[r]||(e[r]=[]),null==(i=e[r])||i.push(t)},off(r,t){var i;e[r]&&(e[r]=null==(i=e[r])?void 0:i.filter(e=>e!==t))},emit(r,t){var i;e[r]&&(null==(i=e[r])||i.forEach(e=>e(t)))}}}();function d(){let[e,r]=(0,l.useState)(null);if((0,l.useEffect)(()=>{let e=e=>{r(e)};return c.on("permission-error",e),()=>{c.off("permission-error",e)}},[]),e)throw e;return null}let p=(0,l.createContext)(void 0),f=e=>{let{children:r,firebaseApp:t,firestore:i,auth:n}=e,[s,u]=(0,l.useState)({user:null,isUserLoading:!0,userError:null});(0,l.useEffect)(()=>{if(!n)return void u({user:null,isUserLoading:!1,userError:Error("Auth service not provided.")});u({user:null,isUserLoading:!0,userError:null});let e=(0,o.hg)(n,e=>{u({user:e,isUserLoading:!1,userError:null})},e=>{console.error("FirebaseProvider: onAuthStateChanged error:",e),u({user:null,isUserLoading:!1,userError:e})});return()=>e()},[n]);let c=(0,l.useMemo)(()=>{let e=!!(t&&i&&n);return{areServicesAvailable:e,firebaseApp:e?t:null,firestore:e?i:null,auth:e?n:null,user:s.user,isUserLoading:s.isUserLoading,userError:s.userError}},[t,i,n,s]);return(0,a.jsxs)(p.Provider,{value:c,children:[(0,a.jsx)(d,{}),r]})},h=()=>{let e=(0,l.useContext)(p);if(void 0===e)throw Error("useFirebase must be used within a FirebaseProvider.");if(!e.areServicesAvailable||!e.firebaseApp||!e.firestore||!e.auth)throw Error("Firebase core services not available. Check FirebaseProvider props.");return{firebaseApp:e.firebaseApp,firestore:e.firestore,auth:e.auth,user:e.user,isUserLoading:e.isUserLoading,userError:e.userError}},m=()=>{let{auth:e}=h();return e},b=()=>{let{firestore:e}=h();return e},v=()=>{let{firebaseApp:e}=h();return e},g=()=>{let{user:e,isUserLoading:r,userError:t}=h();return{user:e,isUserLoading:r,userError:t}};function E(e){let{children:r}=e,t=(0,l.useMemo)(()=>I(),[]);return(0,a.jsx)(f,{firebaseApp:t.firebaseApp,auth:t.auth,firestore:t.firestore,children:r})}class S extends Error{constructor(e){let r=function(e){let r=null;try{let e=(0,o.xI)().currentUser;e&&(r=function(e){var r;if(!e)return null;let t={name:e.displayName,email:e.email,email_verified:e.emailVerified,phone_number:e.phoneNumber,sub:e.uid,firebase:{identities:e.providerData.reduce((e,r)=>(r.providerId&&(e[r.providerId]=[r.uid]),e),{}),sign_in_provider:(null==(r=e.providerData[0])?void 0:r.providerId)||"custom",tenant:e.tenantId}};return{uid:e.uid,token:t}}(e))}catch(e){}return{auth:r,method:e.operation,path:"/databases/(default)/documents/".concat(e.path),resource:e.requestResourceData?{data:e.requestResourceData}:void 0}}(e);super("Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify(r,null,2))),this.name="FirebaseError",this.request=r}}function w(e){let[r,t]=(0,l.useState)(null),[i,n]=(0,l.useState)(!!e),[o,u]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(!e){t(null),n(!1),u(null);return}n(!0);let r=(0,s.aQ)(e,e=>{let r=[];for(let t of e.docs)r.push({...t.data(),id:t.id});t(r),u(null),n(!1)},r=>{if("permission-denied"===r.code){let r=new S({operation:"list",path:"collection"===e.type?e.path:e._query.path.canonicalString()});u(r),c.emit("permission-error",r)}else u(r);t(null),n(!1)});return()=>r()},[e]),{data:r,isLoading:i,error:o}}function k(e){let[r,t]=(0,l.useState)(null),[i,n]=(0,l.useState)(!!e),[o,u]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(!e){t(null),n(!1),u(null);return}n(!0);let r=(0,s.aQ)(e,e=>{e.exists()?t({...e.data(),id:e.id}):t(null),u(null),n(!1)},r=>{let i=new S({operation:"get",path:e.path});u(i),t(null),n(!1),c.emit("permission-error",i)});return()=>r()},[e]),{data:r,isLoading:i,error:o}}function D(e,r,t){(0,s.BN)(e,r,t).catch(t=>{c.emit("permission-error",new S({path:e.path,operation:"write",requestResourceData:r}))})}function F(e,r){return(0,s.gS)(e,r).catch(t=>{c.emit("permission-error",new S({path:e.path,operation:"create",requestResourceData:r}))})}function A(e,r){(0,s.mZ)(e,r).catch(t=>{c.emit("permission-error",new S({path:e.path,operation:"update",requestResourceData:r}))})}function U(e){(0,s.kd)(e).catch(r=>{c.emit("permission-error",new S({path:e.path,operation:"delete"}))})}var x=t(5758);function I(){if(!(0,n.Dk)().length){let e;try{e=(0,n.Wp)()}catch(r){console.warn("Automatic initialization failed. Falling back to firebase config object.",r),e=(0,n.Wp)(i)}return _(e)}return _((0,n.Sx)())}function _(e){return{firebaseApp:e,auth:(0,o.xI)(e),firestore:(0,s.aU)(e),storage:(0,u.c7)(e)}}}}]);