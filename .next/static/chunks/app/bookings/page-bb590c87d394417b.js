(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{4383:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Z});var r=a(5155),s=a(6766),n=a(8817),i=a(4216),l=a(285),d=a(7962),o=a(2115),c=a(5317),m=a(6874),u=a.n(m),x=a(5695),f=a(1876);function h(e,t){var a;let r,s,n=null!=(a=null==t?void 0:t.additionalDigits)?a:2,i=function(e){let t,a={},r=e.split(g.dateTimeDelimiter);if(r.length>2)return a;if(/:/.test(r[0])?t=r[0]:(a.date=r[0],t=r[1],g.timeZoneDelimiter.test(a.date)&&(a.date=e.split(g.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){let e=g.timezone.exec(t);e?(a.time=t.replace(e[1],""),a.timezone=e[1]):a.time=t}return a}(e);if(i.date){let e=function(e,t){let a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:NaN,restDateString:""};let s=r[1]?parseInt(r[1]):null,n=r[2]?parseInt(r[2]):null;return{year:null===n?s:100*n,restDateString:e.slice((r[1]||r[2]).length)}}(i.date,n);r=function(e,t){var a,r,s,n,i,l,d,o;if(null===t)return new Date(NaN);let c=e.match(v);if(!c)return new Date(NaN);let m=!!c[4],u=p(c[1]),x=p(c[2])-1,f=p(c[3]),h=p(c[4]),g=p(c[5])-1;if(m){return(a=0,r=h,s=g,r>=1&&r<=53&&s>=0&&s<=6)?function(e,t,a){let r=new Date(0);r.setUTCFullYear(e,0,4);let s=r.getUTCDay()||7;return r.setUTCDate(r.getUTCDate()+((t-1)*7+a+1-s)),r}(t,h,g):new Date(NaN)}{let e=new Date(0);return(n=t,i=x,l=f,i>=0&&i<=11&&l>=1&&l<=(D[i]||(y(n)?29:28))&&(d=t,(o=u)>=1&&o<=(y(d)?366:365)))?(e.setUTCFullYear(t,x,Math.max(u,f)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let l=r.getTime(),d=0;if(i.time&&isNaN(d=function(e){var t,a,r;let s=e.match(N);if(!s)return NaN;let n=j(s[1]),i=j(s[2]),l=j(s[3]);return(t=n,a=i,r=l,24===t?0===a&&0===r:r>=0&&r<60&&a>=0&&a<60&&t>=0&&t<25)?n*f.s0+i*f.Cg+1e3*l:NaN}(i.time)))return new Date(NaN);if(i.timezone){if(isNaN(s=function(e){var t,a;if("Z"===e)return 0;let r=e.match(b);if(!r)return 0;let s="+"===r[1]?-1:1,n=parseInt(r[2]),i=r[3]&&parseInt(r[3])||0;return(t=0,(a=i)>=0&&a<=59)?s*(n*f.s0+i*f.Cg):NaN}(i.timezone)))return new Date(NaN)}else{let e=new Date(l+d),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(l+d+s)}let g={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},v=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,N=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,b=/^([+-])(\d{2})(?::?(\d{2}))?$/;function p(e){return e?parseInt(e):1}function j(e){return e&&parseFloat(e.replace(",","."))||0}let D=[31,null,31,30,31,30,31,31,30,31,30,31];function y(e){return e%400==0||e%4==0&&e%100!=0}var w=a(5476),k=a(831),C=a(9140),T=a(3013),A=a(2085),U=a(9434);let I=(0,A.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function M(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,U.cn)(I({variant:a}),t),...s})}var P=a(1920),F=a(4636),O=a(5511);function S(){let e=n.G.find(e=>"hero-estate"===e.id),t=(0,d.useFirestore)(),a=(0,x.useSearchParams)(),m=a.get("checkIn"),f=a.get("checkOut"),g=a.get("adults"),v=a.get("children"),N=(parseInt(g||"0")+parseInt(v||"0")).toString(),b=(0,o.useMemo)(()=>t?(0,c.rJ)(t,"rooms"):null,[t]),{data:p,isLoading:j}=(0,d.useCollection)(b),D=(0,o.useMemo)(()=>t?(0,c.rJ)(t,"reservations"):null,[t]),{data:y,isLoading:A}=(0,d.useCollection)(D),U=(0,o.useMemo)(()=>{if(A||!p||!m||!f)return(null==p?void 0:p.map(e=>({...e,isAvailable:!1,nextAvailableDates:[],bookedDates:[]})))||[];if(!y)return p.map(e=>({...e,isAvailable:!0,nextAvailableDates:[],bookedDates:[]}));let e=h(m),t=h(f);return p.map(a=>{let r=y.filter(e=>e.roomId===a.id&&"confirmed"===e.status).map(e=>({start:h(e.checkInDate+"T00:00:00Z"),end:h(e.checkOutDate+"T00:00:00Z")})).sort((e,t)=>e.start.getTime()-t.start.getTime()),s=r.some(a=>e<a.end&&a.start<t),n=r.flatMap(e=>(function(e,t){let a=(0,w.a)(e.start),r=(0,w.a)(e.end),s=+a>+r,n=s?+a:+r,i=s?r:a;i.setHours(0,0,0,0);let l=1;if(!l)return[];l<0&&(l=-l,s=!s);let d=[];for(;+i<=n;)d.push((0,w.a)(i)),i.setDate(i.getDate()+l),i.setHours(0,0,0,0);return s?d.reverse():d})({start:e.start,end:(0,k.f)(e.end,-1)}));if(!s)return{...a,isAvailable:!0,nextAvailableDates:[],bookedDates:n};let i=[],l=(0,k.f)(new Date,1);for(;i.length<7&&(r.some(e=>l>=e.start&&l<e.end)||i.push(new Date(l)),l=(0,k.f)(l,1),!((0,C.m)(l,new Date)>730)););return{...a,isAvailable:!1,nextAvailableDates:i,bookedDates:n}})},[p,y,m,f,A]),I=j||A;return(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("section",{className:"relative h-[50vh] min-h-[400px] w-full",children:[e&&(0,r.jsx)(s.default,{src:e.imageUrl,alt:e.description,fill:!0,className:"object-cover",priority:!0,"data-ai-hint":e.imageHint}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/40"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-white z-10 w-full px-4 flex items-center justify-center",children:(0,r.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,r.jsx)("h1",{className:"font-headline text-5xl md:text-7xl tracking-wider font-normal text-white/90",children:"Available Rooms"})})})]}),(0,r.jsx)("div",{className:"bg-background",children:(0,r.jsx)("div",{className:"py-8",children:(0,r.jsx)(i.W,{})})}),m&&f&&(0,r.jsx)("div",{className:"py-4 bg-secondary text-center text-foreground",children:(0,r.jsxs)("p",{children:["Showing availability for: ",(0,r.jsx)("strong",{children:(0,T.GP)(h(m),"PPP")})," to ",(0,r.jsx)("strong",{children:(0,T.GP)(h(f),"PPP")})," for ",(0,r.jsx)("strong",{children:N})," guest(s)."]})}),(0,r.jsx)("section",{className:"py-20 bg-secondary",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-12",children:[I&&(0,r.jsx)("p",{className:"text-center",children:"Checking availability..."}),!I&&!U.length&&(0,r.jsxs)("div",{className:"text-center col-span-full bg-background p-12",children:[(0,r.jsx)("h3",{className:"font-headline text-2xl text-destructive",children:"No Rooms Found"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-4",children:"We couldn't find any rooms to check. Please check back later."})]}),null==U?void 0:U.map(e=>{let t="/booking?roomId=".concat(e.id,"&checkIn=").concat(m||"","&checkOut=").concat(f||"","&adults=").concat(g||2,"&children=").concat(v||0);return(0,r.jsx)("div",{className:"bg-background overflow-hidden",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 items-center",children:[(0,r.jsx)("div",{className:"relative h-80 md:h-full min-h-[300px]",children:e.imageUrl?(0,r.jsx)(s.default,{src:e.imageUrl,alt:e.title,fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"h-full w-full bg-muted flex items-center justify-center text-muted-foreground",children:"No Image"})}),(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"mb-4 min-h-[60px]",children:e.isAvailable?(0,r.jsx)(M,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:"Available"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M,{variant:"destructive",children:"Not Available"}),e.nextAvailableDates.length>0&&(0,r.jsxs)("div",{className:"text-sm text-muted-foreground mt-2",children:[(0,r.jsx)("p",{children:"Next available dates:"}),(0,r.jsx)("p",{className:"font-semibold text-primary text-xs",children:e.nextAvailableDates.map(e=>(0,T.GP)(e,"MMM dd")).join(", ")})]})]})}),(0,r.jsxs)("h3",{className:"font-headline text-3xl text-foreground relative inline-block",children:[e.title,(0,r.jsx)("div",{className:"absolute bottom-[-10px] left-1/2 -translate-x-1/2 w-1/4 border-b-2 border-primary"})]}),(0,r.jsx)("p",{className:"text-muted-foreground mt-8 text-sm leading-relaxed min-h-[120px] max-w-md mx-auto",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4 text-sm text-foreground my-8",children:[(0,r.jsxs)("span",{children:[e.roomCount," Rooms"]}),(0,r.jsx)("div",{className:"w-px h-4 bg-border"}),(0,r.jsx)("span",{children:e.view})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("span",{className:"font-bold text-lg text-primary",children:["$",e.pricePerNight]}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:" / night"})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-center items-center",children:[(0,r.jsxs)(F.AM,{children:[(0,r.jsx)(F.Wv,{asChild:!0,children:(0,r.jsxs)(l.$,{variant:"outline",className:"text-foreground font-semibold tracking-wider hover:text-primary",children:[(0,r.jsx)(P.A,{className:"mr-2 h-4 w-4"}),"VIEW CALENDAR"]})}),(0,r.jsx)(F.hl,{className:"w-auto p-0",children:(0,r.jsx)(O.V,{mode:"multiple",min:1,selected:[],disabled:e.bookedDates,modifiers:{booked:e.bookedDates},modifiersClassNames:{booked:"day-booked",disabled:"day-booked"},defaultMonth:m?h(m):new Date})})]}),(0,r.jsx)(u(),{href:t,passHref:!0,children:(0,r.jsx)(l.$,{className:"bg-primary text-primary-foreground rounded-sm font-semibold tracking-wider hover:bg-primary/90",disabled:!e.isAvailable,children:"BOOK NOW"})})]})]})]})},e.id)})]})})})]})}function Z(){return(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)("div",{className:"text-center p-8",children:"Loading..."}),children:(0,r.jsx)(S,{})})}},7055:(e,t,a)=>{Promise.resolve().then(a.bind(a,4383))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,302,514,105,602,95,691,874,962,616,441,684,358],()=>t(7055)),_N_E=e.O()}]);