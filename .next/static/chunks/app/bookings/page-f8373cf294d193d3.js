(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{2099:(e,t,a)=>{"use strict";a.d(t,{N:()=>r});let r=(0,a(623).UU)("https://ysejulbuvunfhodersjr.supabase.co","sb_publishable_nn7GsENQXU_YmbYO7S8bUA_s8P4SVW5")},6102:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var r=a(5155),s=a(6766),n=a(8817),l=a(4216),i=a(285),d=a(7780),c=a(2115),o=a(6874),u=a.n(o),m=a(5695),x=a(1876);function f(e,t){var a;let r,s,n=null!=(a=null==t?void 0:t.additionalDigits)?a:2,l=function(e){let t,a={},r=e.split(h.dateTimeDelimiter);if(r.length>2)return a;if(/:/.test(r[0])?t=r[0]:(a.date=r[0],t=r[1],h.timeZoneDelimiter.test(a.date)&&(a.date=e.split(h.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){let e=h.timezone.exec(t);e?(a.time=t.replace(e[1],""),a.timezone=e[1]):a.time=t}return a}(e);if(l.date){let e=function(e,t){let a=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:NaN,restDateString:""};let s=r[1]?parseInt(r[1]):null,n=r[2]?parseInt(r[2]):null;return{year:null===n?s:100*n,restDateString:e.slice((r[1]||r[2]).length)}}(l.date,n);r=function(e,t){var a,r,s,n,l,i,d,c;if(null===t)return new Date(NaN);let o=e.match(g);if(!o)return new Date(NaN);let u=!!o[4],m=N(o[1]),x=N(o[2])-1,f=N(o[3]),h=N(o[4]),b=N(o[5])-1;if(u){return(a=0,r=h,s=b,r>=1&&r<=53&&s>=0&&s<=6)?function(e,t,a){let r=new Date(0);r.setUTCFullYear(e,0,4);let s=r.getUTCDay()||7;return r.setUTCDate(r.getUTCDate()+((t-1)*7+a+1-s)),r}(t,h,b):new Date(NaN)}{let e=new Date(0);return(n=t,l=x,i=f,l>=0&&l<=11&&i>=1&&i<=(j[l]||(D(n)?29:28))&&(d=t,(c=m)>=1&&c<=(D(d)?366:365)))?(e.setUTCFullYear(t,x,Math.max(m,f)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let i=r.getTime(),d=0;if(l.time&&isNaN(d=function(e){var t,a,r;let s=e.match(b);if(!s)return NaN;let n=p(s[1]),l=p(s[2]),i=p(s[3]);return(t=n,a=l,r=i,24===t?0===a&&0===r:r>=0&&r<60&&a>=0&&a<60&&t>=0&&t<25)?n*x.s0+l*x.Cg+1e3*i:NaN}(l.time)))return new Date(NaN);if(l.timezone){if(isNaN(s=function(e){var t,a;if("Z"===e)return 0;let r=e.match(v);if(!r)return 0;let s="+"===r[1]?-1:1,n=parseInt(r[2]),l=r[3]&&parseInt(r[3])||0;return(t=0,(a=l)>=0&&a<=59)?s*(n*x.s0+l*x.Cg):NaN}(l.timezone)))return new Date(NaN)}else{let e=new Date(i+d),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(i+d+s)}let h={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,b=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,v=/^([+-])(\d{2})(?::?(\d{2}))?$/;function N(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}let j=[31,null,31,30,31,30,31,31,30,31,30,31];function D(e){return e%400==0||e%4==0&&e%100!=0}var y=a(5476),w=a(831),k=a(9140),C=a(3013),T=a(6126),A=a(1920),U=a(4636),I=a(5511);function P(){let e=n.G.find(e=>"hero-estate"===e.id),t=(0,m.useSearchParams)(),a=t.get("checkIn"),o=t.get("checkOut"),x=t.get("adults"),h=t.get("children"),g=(parseInt(x||"0")+parseInt(h||"0")).toString(),{data:b,isLoading:v}=(0,d.m)("rooms"),{data:N,isLoading:p}=(0,d.m)("reservations"),j=(0,c.useMemo)(()=>{if(p||!b||!a||!o)return(null==b?void 0:b.map(e=>({...e,isAvailable:!1,nextAvailableDates:[],bookedDates:[]})))||[];if(!N)return b.map(e=>({...e,isAvailable:!0,nextAvailableDates:[],bookedDates:[]}));let e=f(a),t=f(o);return b.map(a=>{let r=(N||[]).filter(e=>e.roomId===a.id&&"confirmed"===e.status).map(e=>({start:f(e.checkInDate+"T00:00:00Z"),end:f(e.checkOutDate+"T00:00:00Z")})).sort((e,t)=>e.start.getTime()-t.start.getTime()),s=r.some(a=>e<a.end&&a.start<t),n=r.flatMap(e=>(function(e,t){let a=(0,y.a)(e.start),r=(0,y.a)(e.end),s=+a>+r,n=s?+a:+r,l=s?r:a;l.setHours(0,0,0,0);let i=1;if(!i)return[];i<0&&(i=-i,s=!s);let d=[];for(;+l<=n;)d.push((0,y.a)(l)),l.setDate(l.getDate()+i),l.setHours(0,0,0,0);return s?d.reverse():d})({start:e.start,end:(0,w.f)(e.end,-1)}));if(!s)return{...a,isAvailable:!0,nextAvailableDates:[],bookedDates:n};let l=[],i=(0,w.f)(new Date,1);for(;l.length<7&&(r.some(e=>i>=e.start&&i<e.end)||l.push(new Date(i)),i=(0,w.f)(i,1),!((0,k.m)(i,new Date)>730)););return{...a,isAvailable:!1,nextAvailableDates:l,bookedDates:n}})},[b,N,a,o,p]),D=v||p;return(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("section",{className:"relative h-[50vh] min-h-[400px] w-full",children:[e&&(0,r.jsx)(s.default,{src:e.imageUrl,alt:e.description,fill:!0,className:"object-cover",priority:!0,"data-ai-hint":e.imageHint}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/40"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-white z-10 w-full px-4 flex items-center justify-center",children:(0,r.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,r.jsx)("h1",{className:"font-headline text-5xl md:text-7xl tracking-wider font-normal text-white/90",children:"Available Rooms"})})})]}),(0,r.jsx)("div",{className:"bg-background",children:(0,r.jsx)("div",{className:"py-8",children:(0,r.jsx)(l.W,{})})}),a&&o&&(0,r.jsx)("div",{className:"py-4 bg-secondary text-center text-foreground",children:(0,r.jsxs)("p",{children:["Showing availability for: ",(0,r.jsx)("strong",{children:(0,C.GP)(f(a),"PPP")})," to ",(0,r.jsx)("strong",{children:(0,C.GP)(f(o),"PPP")})," for ",(0,r.jsx)("strong",{children:g})," guest(s)."]})}),(0,r.jsx)("section",{className:"py-20 bg-secondary",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-12",children:[D&&(0,r.jsx)("p",{className:"text-center",children:"Checking availability..."}),!D&&!j.length&&(0,r.jsxs)("div",{className:"text-center col-span-full bg-background p-12",children:[(0,r.jsx)("h3",{className:"font-headline text-2xl text-destructive",children:"No Rooms Found"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-4",children:"We couldn't find any rooms to check. Please check back later."})]}),null==j?void 0:j.map(e=>{let t="/booking?roomId=".concat(e.id,"&checkIn=").concat(a||"","&checkOut=").concat(o||"","&adults=").concat(x||2,"&children=").concat(h||0);return(0,r.jsx)("div",{className:"bg-background overflow-hidden",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 items-center",children:[(0,r.jsx)("div",{className:"relative h-80 md:h-full min-h-[300px]",children:e.imageUrl?(0,r.jsx)(s.default,{src:e.imageUrl,alt:e.title,fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"h-full w-full bg-muted flex items-center justify-center text-muted-foreground",children:"No Image"})}),(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"mb-4 min-h-[60px]",children:e.isAvailable?(0,r.jsx)(T.E,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:"Available"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.E,{variant:"destructive",children:"Not Available"}),e.nextAvailableDates.length>0&&(0,r.jsxs)("div",{className:"text-sm text-muted-foreground mt-2",children:[(0,r.jsx)("p",{children:"Next available dates:"}),(0,r.jsx)("p",{className:"font-semibold text-primary text-xs",children:e.nextAvailableDates.map(e=>(0,C.GP)(e,"MMM dd")).join(", ")})]})]})}),(0,r.jsxs)("h3",{className:"font-headline text-3xl text-foreground relative inline-block",children:[e.title,(0,r.jsx)("div",{className:"absolute bottom-[-10px] left-1/2 -translate-x-1/2 w-1/4 border-b-2 border-primary"})]}),(0,r.jsx)("p",{className:"text-muted-foreground mt-8 text-sm leading-relaxed min-h-[120px] max-w-md mx-auto",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4 text-sm text-foreground my-8",children:[(0,r.jsxs)("span",{children:[e.roomCount," Rooms"]}),(0,r.jsx)("div",{className:"w-px h-4 bg-border"}),(0,r.jsx)("span",{children:e.view})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("span",{className:"font-bold text-lg text-primary",children:["$",e.pricePerNight]}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:" / night"})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-center items-center",children:[(0,r.jsxs)(U.AM,{children:[(0,r.jsx)(U.Wv,{asChild:!0,children:(0,r.jsxs)(i.$,{variant:"outline",className:"text-foreground font-semibold tracking-wider hover:text-primary",children:[(0,r.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"VIEW CALENDAR"]})}),(0,r.jsx)(U.hl,{className:"w-auto p-0",children:(0,r.jsx)(I.V,{mode:"multiple",min:1,selected:[],disabled:e.bookedDates,modifiers:{booked:e.bookedDates},modifiersClassNames:{booked:"day-booked",disabled:"day-booked"},defaultMonth:a?f(a):new Date})})]}),(0,r.jsx)(u(),{href:t,passHref:!0,children:(0,r.jsx)(i.$,{className:"bg-primary text-primary-foreground rounded-sm font-semibold tracking-wider hover:bg-primary/90",disabled:!e.isAvailable,children:"BOOK NOW"})})]})]})]})},e.id)})]})})})]})}function S(){return(0,r.jsx)(c.Suspense,{fallback:(0,r.jsx)("div",{className:"text-center p-8",children:"Loading..."}),children:(0,r.jsx)(P,{})})}},6126:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(5155);a(2115);var s=a(2085),n=a(9434);let l=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},7055:(e,t,a)=>{Promise.resolve().then(a.bind(a,6102))},7780:(e,t,a)=>{"use strict";a.d(t,{m:()=>n});var r=a(2115),s=a(2099);function n(e){let[t,a]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let t=!0;async function r(){try{l(!0);let{data:r,error:n}=await s.N.from(e).select("*");if(n)throw n;t&&(a(r),d(null))}catch(a){t&&(console.error("Supabase fetch error for ".concat(e,":"),a),d(a))}finally{t&&l(!1)}}r();let n=s.N.channel("realtime_".concat(e)).on("postgres_changes",{event:"*",schema:"public",table:e},e=>{r()}).subscribe();return()=>{t=!1,s.N.removeChannel(n)}},[e]),{data:t,isLoading:n,error:i}}}},e=>{var t=t=>e(e.s=t);e.O(0,[879,105,96,95,623,691,874,616,441,684,358],()=>t(7055)),_N_E=e.O()}]);